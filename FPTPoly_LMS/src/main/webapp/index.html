<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống Quản lý Đào tạo - FPT Polytechnic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <div class="sidebar">
        <div class="brand"><i class="fa-solid fa-graduation-cap"></i> FPT Poly LMS</div>
        <a href="#" class="nav-item active"><i class="fa-regular fa-calendar-check"></i> Xếp Thời Khóa Biểu</a>
        <a href="#" class="nav-item"><i class="fa-solid fa-layer-group"></i> Quản lý Chương trình</a>
        <a href="#" class="nav-item"><i class="fa-solid fa-chalkboard-user"></i> Giảng viên & Phòng</a>
    </div>

    <div class="main">
        <h2 class="header-title">Lập Kế Hoạch & Xếp Lịch Thông Minh</h2>

        <div class="steps">
            <div class="step-item active" id="step1-nav">
                <div class="step-icon">1</div> Danh sách Môn học
            </div>
            <div class="step-item" id="step2-nav">
                <div class="step-icon">2</div> Xử lý AI
            </div>
            <div class="step-item" id="step3-nav">
                <div class="step-icon">3</div> Kết quả Tối ưu
            </div>
        </div>

        <div id="section-input" class="section active">
            <div class="input-toolbar">
                <div class="form-group" style="margin-bottom: 0; flex: 1;">
                    <select class="form-control">
                        <option>Spring 2026 - Block 1</option>
                    </select>
                </div>
                <button class="btn btn-outline"><i class="fa-solid fa-file-excel"></i> Import Excel</button>
                <div style="flex: 2; text-align: right; font-size: 14px; color: #666;">
                    Đã tải lên: <strong>5 môn</strong> | Tổng sinh viên: <strong>1,500</strong>
                </div>
            </div>

            <div id="inputListContainer" class="course-list">
                </div>

            <div style="margin-top: 20px; text-align: right;">
                <button class="btn btn-primary" onclick="goToAI()">
                    <i class="fa-solid fa-robot"></i> Tiếp tục: Chạy Phân Tích AI
                </button>
            </div>
        </div>

        <div id="section-ai" class="section">
            <div class="ai-loading">
                <i class="fa-solid fa-gear spinner"></i>
                <h3>AI đang tính toán phương án tối ưu...</h3>
                <p style="color: #666">Đang xử lý ràng buộc: Không trùng phòng, Ưu tiên tòa F.</p>
            </div>
        </div>

        <div id="section-result" class="section">
            <div class="result-header">
                <h3><i class="fa-solid fa-check-circle" style="color: #27ae60;"></i> Xếp lịch thành công!</h3>
                <p>Độ tối ưu: <strong>98.5%</strong> | Xung đột: <span style="color: red;">0</span></p>
            </div>
            <div class="course-list" id="resultListContainer">
                </div>
            <button class="btn btn-success" style="margin-top: 20px;" onclick="alert('Đã lưu!')">Phê duyệt & Đồng bộ</button>
        </div>
    </div>

    <div class="modal-overlay" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fa-solid fa-pen-to-square"></i> Chi tiết Môn học</h3>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            
            <form id="editForm">
                <input type="hidden" id="edit-id">
                
                <div class="form-group">
                    <label class="form-label">Tên môn học</label>
                    <input type="text" class="form-control" id="edit-name" style="font-weight: bold; color: var(--primary);">
                </div>

                <div class="form-group">
                    <label class="form-label">Mã lớp / Mã học phần</label>
                    <input type="text" class="form-control" id="edit-code">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label class="form-label">Giảng viên dự kiến</label>
                        <select class="form-control" id="edit-teacher">
                            <option value="Nguyễn Lan Oanh">Nguyễn Lan Oanh</option>
                            <option value="Tô Hữu Nguyên">Tô Hữu Nguyên</option>
                            <option value="Phạm Thị Thương">Phạm Thị Thương</option>
                            <option value="Nguyễn Văn Núi">Nguyễn Văn Núi</option>
                            <option value="Bùi Ngọc Tuấn">Bùi Ngọc Tuấn</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phòng học ưu tiên</label>
                        <select class="form-control" id="edit-room">
                            <option value="F301">F301</option>
                            <option value="F302">F302</option>
                            <option value="P201">P201</option>
                            <option value="Online">Online</option>
                        </select>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label class="form-label">Số tín chỉ</label>
                        <input type="number" class="form-control" id="edit-credits">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Số tuần học</label>
                        <input type="text" class="form-control" id="edit-weeks">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Ràng buộc đặc biệt</label>
                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                        <span class="tag-badge">Không trùng lịch GV</span>
                        <span class="tag-badge">Ưu tiên Tòa F</span>
                    </div>
                </div>

                <div style="text-align: right; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
                    <button type="button" class="btn btn-outline" onclick="closeModal()">Đóng</button>
                    <button type="button" class="btn btn-primary" onclick="saveChanges()">Lưu thay đổi</button>
                </div>
            </form>
        </div>
    </div>

    <script src="assets/js/script.js"></script>
</body>
</html>
